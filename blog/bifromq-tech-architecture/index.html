<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">BifroMQ Technical Architecture Overview | Apache BifroMQ (Incubating) - Open source MQTT Broker</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://bifromq.apache.org/blog/bifromq-tech-architecture/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="BifroMQ Technical Architecture Overview | Apache BifroMQ (Incubating) - Open source MQTT Broker"><meta data-rh="true" name="description" content="In today&#x27;s IoT field, the MQTT protocol has become an indispensable key element, providing core technical support for efficient and real-time data transmission. However, projects that currently offer MQTT capabilities are mainly concentrated on traditional, existing &quot;out-of-the-box&quot; IoT device management platforms, leading to a lack of sufficient attention and exploration of the underlying MQTT protocol implementation. However, we firmly believe that the characteristics of the MQTT protocol have a broader application prospect, not limited to the IoT field. It is out of this belief that after years of practice and technical accumulation, we have launched the open-source project BifroMQ, focusing on the efficient processing of the MQTT protocol, especially in the face of large-scale loads."><meta data-rh="true" property="og:description" content="In today&#x27;s IoT field, the MQTT protocol has become an indispensable key element, providing core technical support for efficient and real-time data transmission. However, projects that currently offer MQTT capabilities are mainly concentrated on traditional, existing &quot;out-of-the-box&quot; IoT device management platforms, leading to a lack of sufficient attention and exploration of the underlying MQTT protocol implementation. However, we firmly believe that the characteristics of the MQTT protocol have a broader application prospect, not limited to the IoT field. It is out of this belief that after years of practice and technical accumulation, we have launched the open-source project BifroMQ, focusing on the efficient processing of the MQTT protocol, especially in the face of large-scale loads."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-09-06T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/popduke"><meta data-rh="true" property="article:tag" content="BifroMQ,MQTT Broker,Serverless,Multi-Tenancy,Architecture"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bifromq.apache.org/blog/bifromq-tech-architecture/"><link data-rh="true" rel="alternate" href="https://bifromq.apache.org/blog/bifromq-tech-architecture/" hreflang="en"><link data-rh="true" rel="alternate" href="https://bifromq.apache.org/blog/bifromq-tech-architecture/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://bifromq.apache.org/blog/bifromq-tech-architecture","mainEntityOfPage":"https://bifromq.apache.org/blog/bifromq-tech-architecture","url":"https://bifromq.apache.org/blog/bifromq-tech-architecture","headline":"BifroMQ Technical Architecture Overview","name":"BifroMQ Technical Architecture Overview","description":"In today's IoT field, the MQTT protocol has become an indispensable key element, providing core technical support for efficient and real-time data transmission. However, projects that currently offer MQTT capabilities are mainly concentrated on traditional, existing \"out-of-the-box\" IoT device management platforms, leading to a lack of sufficient attention and exploration of the underlying MQTT protocol implementation. However, we firmly believe that the characteristics of the MQTT protocol have a broader application prospect, not limited to the IoT field. It is out of this belief that after years of practice and technical accumulation, we have launched the open-source project BifroMQ, focusing on the efficient processing of the MQTT protocol, especially in the face of large-scale loads.","datePublished":"2023-09-06T00:00:00.000Z","author":{"@type":"Person","name":"Yonny(Yu) Hao","url":"https://github.com/popduke","image":"https://github.com/popduke.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://bifromq.apache.org/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache BifroMQ (Incubating) - Open source MQTT Broker RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache BifroMQ (Incubating) - Open source MQTT Broker Atom Feed"><link rel="stylesheet" href="/assets/css/styles.9f1b226c.css">
<script src="/assets/js/runtime~main.247e76bd.js" defer="defer"></script>
<script src="/assets/js/main.8a59a69e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><link rel="preload" as="image" href="https://github.com/popduke.png"><link rel="preload" as="image" href="https://img.shields.io/discord/1115542029531885599?logo=discord&amp;logoColor=white"><link rel="preload" as="image" href="/img/apache-incubator.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_cCsT" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="BifroMQ Logo" class="bifromq-navbar-logo-class themedComponent_kh6W themedComponent--light_h03h"><img src="/img/logo_dark.svg" alt="BifroMQ Logo" class="bifromq-navbar-logo-class themedComponent_kh6W themedComponent--dark_QNPN"></div><b class="navbar__title text--truncate">Apache BifroMQ (Incubating)</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/get_started/intro/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><a class="navbar__item navbar__link" href="/docs/get_started/download/intro/">Download</a><a class="navbar__item navbar__link" href="/docs/get_started/faq/">FAQ</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/get_started/intro/">Next (Incubating)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/get_started/intro/">Next (Incubating)</a></li><li><a class="dropdown__link" href="/docs/3.3.x/get_started/intro/">3.3.x</a></li><li><a class="dropdown__link" href="/docs/3.2.x/get_started/intro/">3.2.x</a></li><li><a class="dropdown__link" href="/docs/3.1.x/get_started/intro/">3.1.x</a></li><li><a class="dropdown__link" href="/docs/3.0.x/get_started/intro/">3.0.x</a></li><li><a class="dropdown__link" href="/docs/2.1.x/Readme/">2.1.x</a></li><li><a class="dropdown__link" href="/docs/2.0.0/Readme/">2.0.0</a></li><li><a class="dropdown__link" href="/docs/1.0.x/Readme/">1.0.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><a href="https://github.com/apache/bifromq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_mVhP colorModeToggle_uW4C"><button class="clean-btn toggleButton_IMMl toggleButtonDisabled_LuC_" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 lightToggleIcon_AJW3"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 darkToggleIcon_JatO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 systemToggleIcon__uuk"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_AGV4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_tdfK"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_dtOB thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_QI0f margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_JaZ8">2024</h3><ul class="sidebarItemList_sf3w clean-list"><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-version-3/">BifroMQ 3.0.0 Beta: Enhanced Messaging with MQTT 5.0</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_JaZ8">2023</h3><ul class="sidebarItemList_sf3w clean-list"><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-topic-subscription/">BifroMQ&#x27;s Topic Subscription Mechanism</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-high-availibility/">BifroMQ: Unveiling the Technology for Building Efficient and Available Clusters</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-standardcluster/">BifroMQ StandardCluster</a></li><li class="sidebarItem_MlaL"><a aria-current="page" class="sidebarItemLink_PdtZ sidebarItemLinkActive_J7Co" href="/blog/bifromq-tech-architecture/">BifroMQ Technical Architecture Overview</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/AnyAuth and Integration with BifroMQ/">AnyAuth and Integration with BifroMQ</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/news-bifromq-opensource/">BifroMQ officially open source : high-performance multi-tenant MQTT Broker</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_LGXf">BifroMQ Technical Architecture Overview</h1><div class="container_o_qj margin-vert--md"><time datetime="2023-09-06T00:00:00.000Z">September 6, 2023</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_nbqI"><div class="avatar margin-bottom--sm"><a href="https://github.com/popduke" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_QuNx" src="https://github.com/popduke.png" alt="Yonny(Yu) Hao"></a><div class="avatar__intro authorDetails_zi_r"><div class="avatar__name"><a href="https://github.com/popduke" target="_blank" rel="noopener noreferrer"><span class="authorName_J_rd">Yonny(Yu) Hao</span></a></div><div class="authorSocials_ZMMT"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>In today&#x27;s IoT field, the MQTT protocol has become an indispensable key element, providing core technical support for efficient and real-time data transmission. However, projects that currently offer MQTT capabilities are mainly concentrated on traditional, existing &quot;out-of-the-box&quot; IoT device management platforms, leading to a lack of sufficient attention and exploration of the underlying MQTT protocol implementation. However, we firmly believe that the characteristics of the MQTT protocol have a broader application prospect, not limited to the IoT field. It is out of this belief that after years of practice and technical accumulation, we have launched the open-source project BifroMQ, focusing on the efficient processing of the MQTT protocol, especially in the face of large-scale loads.</p>
<p><strong>Neutral and Scalable MQTT Protocol Middleware</strong></p>
<p>Compared to traditional IoT device management platforms, BifroMQ adheres to a different design philosophy. We boldly abandon the traditional paradigm of &quot;one-size-fits-all solutions&quot; and focus on the needs of high-performance MQTT protocols. We believe that the characteristics of the MQTT protocol have a broader application paradigm, so BifroMQ is committed to fully exploiting the potential of the MQTT protocol, especially in terms of excellent performance when handling large-scale loads.</p>
<p>Compared to integrating logic with downstream systems (such as Kafka) in MQTT implementations, BifroMQ prefers to &quot;dock&quot; with downstream systems in a way that complies with MQTT standards. For example, through the Shared Subscription mechanism, the integration logic is externalized to achieve more decoupled bridging and the ability to forward messages to heterogeneous systems while maintaining high message throughput. This design philosophy makes BifroMQ a highly customizable middleware that can easily adapt to various downstream systems to meet the needs of different business scenarios.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="building-large-scale-multi-tenant-serverless-cloud-services">Building Large-Scale Multi-Tenant Serverless Cloud Services<a href="#building-large-scale-multi-tenant-serverless-cloud-services" class="hash-link" aria-label="Direct link to Building Large-Scale Multi-Tenant Serverless Cloud Services" title="Direct link to Building Large-Scale Multi-Tenant Serverless Cloud Services">​</a></h2>
<p>The mission of BifroMQ is to build an MQTT messaging system suitable for large-scale multi-tenant use to support the business characteristics of Serverless-type cloud services. This mission is driven by a deep understanding of the characteristics of the MQTT protocol and confidence in its broader application. Unlike traditional enterprise architectures, Serverless cloud services emphasize resource allocation on demand, elastic expansion, and highly flexible service construction. Therefore, BifroMQ, through its multi-tenant architecture and resource sharing mechanism, provides the feature of &quot;shared resources, exclusive experience&quot; for Serverless-type businesses.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="enterprise-deployment-flexibility-and-robustness">Enterprise Deployment: Flexibility and Robustness<a href="#enterprise-deployment-flexibility-and-robustness" class="hash-link" aria-label="Direct link to Enterprise Deployment: Flexibility and Robustness" title="Direct link to Enterprise Deployment: Flexibility and Robustness">​</a></h2>
<p>Although the goal of BifroMQ is to build multi-tenant Serverless cloud services, multi-tenant + shared resources are essentially an abstraction of single-tenant exclusive resources. Consistent with our philosophy, BifroMQ easily supports common &quot;Shared Nothing&quot; enterprise-level cluster deployments through the free combination and configuration of core components. In fact, this is also the default deployment mode of the open-source version of BifroMQ. This flexibility allows BifroMQ to adapt to system architectures of various scales and needs.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="bifromq-architecture-analysis">BifroMQ Architecture Analysis<a href="#bifromq-architecture-analysis" class="hash-link" aria-label="Direct link to BifroMQ Architecture Analysis" title="Direct link to BifroMQ Architecture Analysis">​</a></h2>
<p>The architectural design of BifroMQ is based on &quot;first principles,&quot; analyzing the technologies needed to achieve design goals from a technical perspective and how to organically combine these technologies to achieve overall optimization. Therefore, it is difficult to fully understand its connotation just from the project structure and code logic. The following will describe the overall architecture of BifroMQ from three main angles.</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="modular-architecture-based-on-decentralized-cluster-management">Modular Architecture Based on Decentralized Cluster Management<a href="#modular-architecture-based-on-decentralized-cluster-management" class="hash-link" aria-label="Direct link to Modular Architecture Based on Decentralized Cluster Management" title="Direct link to Modular Architecture Based on Decentralized Cluster Management">​</a></h3>
<p><strong>Firstly</strong>, apart from the implementation logic of the MQTT protocol itself, the various functional service modules of BifroMQ are built on a set of decentralized underlying cluster construction capabilities (base-cluster), as shown in the following figure:</p>
<p><img decoding="async" loading="lazy" alt="Modular architecture of BifroMQ&amp;#39;s decentralized cluster" src="/assets/images/bifromq-architecture-1-99ffa619fa5852e0ace0ae49e41c7ff0.png" width="1521" height="876" class="img_m7vE"></p>
<p class="text-gray-400 text-center">Modular architecture of BifroMQ&#x27;s decentralized cluster</p>
<p>The cluster logic constructed by base-cluster is logically divided into two layers: Underlay Cluster and Overlay Cluster. The Underlay Cluster is called the &quot;Host&quot; Cluster, and each Host in BifroMQ corresponds to a service process (Process) running on the operating system. The Host Cluster uses Gossip-like protocols (SWIM Protocol) to implement Host Membership and provides an abstract Host address for the Overlay Cluster. The Overlay Cluster is called the &quot;Agent&quot; Cluster, which provides an Agent-level address abstraction (Agent Address) based on the Host address. In BifroMQ, the Agent corresponds to a logical service (Service) that implements specific functions. These logical services (unifiedly implemented through the base-rpc framework) include client and server role modules, which use the capabilities of the Agent Cluster to achieve service registration and discovery.</p>
<p>The benefits of this architecture include:</p>
<ol>
<li>Logical services are decoupled from the processes in which they are located, allowing for more flexible encapsulation and combination according to deployment scenarios.</li>
<li>The &quot;service discovery&quot; of logical services does not depend on traditional registration centers or name services, thereby eliminating the operational risk of single-point failures and allowing the cluster scale to freely expand.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="modular-load-isolation-and-collaboration">Modular Load Isolation and Collaboration<a href="#modular-load-isolation-and-collaboration" class="hash-link" aria-label="Direct link to Modular Load Isolation and Collaboration" title="Direct link to Modular Load Isolation and Collaboration">​</a></h3>
<p><strong>Next</strong>, we describe the structure of BifroMQ from the perspective of protocol implementation. When architecting from the perspective of building Serverless cloud services, it is necessary to consider the rationality of functional implementation from the perspective of load isolation and management, that is, the multi-tenancy of the load. We have split the workload of the MQTT protocol so that each type of load can exist in the form of an independent sub-cluster, and these sub-clusters build complete MQTT capabilities through collaboration. The following are the MQTT load-related modules in BifroMQ:</p>
<ul>
<li>bifromq-mqtt: Responsible for handling the long-connection load of the MQTT protocol</li>
<li>bifromq-dist: Responsible for maintaining the high-reliability storage and large-scale message routing of MQTT subscription status</li>
<li>bifromq-inbox: Responsible for the high-reliability storage of subscriber session messages in CleanSession=false mode</li>
<li>bifromq-retain: Responsible for the high-reliability storage of Retain messages</li>
</ul>
<p>The collaboration relationship between these modules is shown in the following figures:</p>
<p><img decoding="async" loading="lazy" alt="BifroMQ Module Collaboration Relationship 1" src="/assets/images/bifromq-architecture-2-1-7d0c9e677ec8f66289475f074bf35aaf.png" width="1266" height="779" class="img_m7vE">
<img decoding="async" loading="lazy" alt="BifroMQ Module Collaboration Relationship 2" src="/assets/images/bifromq-architecture-2-2-092f9df6525b74a1165ef9257f37809e.png" width="1417" height="781" class="img_m7vE"></p>
<p class="text-gray-400 text-center">BifroMQ Module Collaboration Relationship</p>
<p>It is worth mentioning that the bifromq-dist, bifromq-inbox, and bifromq-retain modules all make full use of the capabilities of base-kv to achieve distributed strong consistency persistence of key loads. In the operation and maintenance scenarios of Serverless cloud services, this is particularly important for ensuring SLA.</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="neutrality-standard-oriented-and-scalable-integration">Neutrality: Standard-Oriented and Scalable Integration<a href="#neutrality-standard-oriented-and-scalable-integration" class="hash-link" aria-label="Direct link to Neutrality: Standard-Oriented and Scalable Integration" title="Direct link to Neutrality: Standard-Oriented and Scalable Integration">​</a></h3>
<p>As mentioned earlier, the positioning of BifroMQ is to implement MQTT standard middleware, emphasizing neutrality and integrability more. It is not on the same level as other projects that include MQTT capabilities as part of a &quot;one-size-fits-all IoT platform.&quot;</p>
<p>Therefore, the standard for judging &quot;whether BifroMQ has a certain function or will support a certain function in the future?&quot; is very simple: all capabilities defined by the MQTT protocol belong to the scope that the BifroMQ project needs to support, and all functions that exceed the definition of the MQTT protocol, we prefer to exist as independent components or services, and integrate with BifroMQ in a way that complies with MQTT standards. This method helps to build larger-scale cloud services and promote the maturity of related technologies.</p>
<p>Of course, the integrability of BifroMQ is also reflected in the integration of the middleware itself with various business systems, mainly including three mechanisms: Plugin, API, and Metrics:</p>
<p><img decoding="async" loading="lazy" alt="Typical Scenario Integration Architecture" src="/assets/images/bifromq-architecture-3-c4baa6efcc8cda4dfc1c2879edf594c2.png" width="1205" height="757" class="img_m7vE"></p>
<p class="text-gray-400 text-center">Typical Scenario Integration Architecture</p>
<ul>
<li>
<p>The Plugin mechanism is the main way to implement business logic integration. bifromq currently defines the following plugin interface modules:</p>
<ul>
<li>bifromq-plugin-auth-provider: Implement client authentication and Pub/Sub authorization logic based on message topics</li>
<li>bifromq-plugin-event-collector: Implement business logic triggered by various MQTT-related events</li>
<li>bifromq-plugin-setting-provider: Implement tenant-level runtime setting change management logic</li>
</ul>
</li>
<li>
<p>Reference implementations of these interfaces can be found in the BifroMQ-Inside project.</p>
</li>
<li>
<p>The API mechanism (coming soon) provides BifroMQ&#x27;s runtime HTTP management interface, implementing basic management operations such as server-side subscription management and disconnection.</p>
</li>
<li>
<p>The Metrics mechanism implements metric definition and sampling through the use of the micrometer library, but does not limit the type of collector, allowing business integration parties to customize (you can refer to the build-plugin-demo module in the project).</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h3>
<p>In summary, this is an overall introduction to the technical architecture of BifroMQ. Please look forward to a series of special articles that we will publish next, to explore the various components and design principles of BifroMQ in depth. At the same time, you are welcome to join the BifroMQ Discord  <a href="https://discord.gg/Pfs3QRadRB"><img src="https://img.shields.io/discord/1115542029531885599?logo=discord&amp;logoColor=white" alt="BifroMQ Discord server"></a>.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_kw4g padding--none margin-left--sm"><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/bifro-mq/">BifroMQ</a></li><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/mqtt-broker/">MQTT Broker</a></li><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/serverless/">Serverless</a></li><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/multi-tenancy/">Multi-Tenancy</a></li><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/architecture/">Architecture</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/bifromq-sites/tree/master/blog" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_s6_v" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_SVwk"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/bifromq-standardcluster/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">BifroMQ StandardCluster</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/AnyAuth and Integration with BifroMQ/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">AnyAuth and Integration with BifroMQ</div></a></nav></main><div class="col col--2"><div class="tableOfContents_D50z thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#building-large-scale-multi-tenant-serverless-cloud-services" class="table-of-contents__link toc-highlight">Building Large-Scale Multi-Tenant Serverless Cloud Services</a></li><li><a href="#enterprise-deployment-flexibility-and-robustness" class="table-of-contents__link toc-highlight">Enterprise Deployment: Flexibility and Robustness</a></li><li><a href="#bifromq-architecture-analysis" class="table-of-contents__link toc-highlight">BifroMQ Architecture Analysis</a><ul><li><a href="#modular-architecture-based-on-decentralized-cluster-management" class="table-of-contents__link toc-highlight">Modular Architecture Based on Decentralized Cluster Management</a></li><li><a href="#modular-load-isolation-and-collaboration" class="table-of-contents__link toc-highlight">Modular Load Isolation and Collaboration</a></li><li><a href="#neutrality-standard-oriented-and-scalable-integration" class="table-of-contents__link toc-highlight">Neutrality: Standard-Oriented and Scalable Integration</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" rel="noopener noreferrer" class="footerLogoLink_U0bA"><img src="/img/apache-incubator.svg" alt="Apache Incubator logo" class="footer__logo themedComponent_kh6W themedComponent--light_h03h" width="200"><img src="/img/apache-incubator.svg" alt="Apache Incubator logo" class="footer__logo themedComponent_kh6W themedComponent--dark_QNPN" width="200"></a></div><div class="footer__copyright"><div>
      <p>
        Apache BifroMQ is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </p>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. <br>
        Apache, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div></footer></div>
</body>
</html>