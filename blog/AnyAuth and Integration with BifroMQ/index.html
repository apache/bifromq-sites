<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">AnyAuth and Integration with BifroMQ | Apache BifroMQ (Incubating) - Open source MQTT Broker</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="AnyAuth and Integration with BifroMQ | Apache BifroMQ (Incubating) - Open source MQTT Broker"><meta data-rh="true" name="description" content="The AnyAuth plugin is a powerful extension built upon the BifroMQ IAuthProvider interface using PF4J. It is"><meta data-rh="true" property="og:description" content="The AnyAuth plugin is a powerful extension built upon the BifroMQ IAuthProvider interface using PF4J. It is"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-09-04T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/Gujiawei-Edinburgh"><meta data-rh="true" property="article:tag" content="Auth,Plugin"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ/"><link data-rh="true" rel="alternate" href="https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ/" hreflang="en"><link data-rh="true" rel="alternate" href="https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ","mainEntityOfPage":"https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ","url":"https://bifromq.apache.org/blog/AnyAuth and Integration with BifroMQ","headline":"AnyAuth and Integration with BifroMQ","name":"AnyAuth and Integration with BifroMQ","description":"The AnyAuth plugin is a powerful extension built upon the BifroMQ IAuthProvider interface using PF4J. It is","datePublished":"2023-09-04T00:00:00.000Z","author":{"@type":"Person","name":"Gu Jiawei","url":"https://github.com/Gujiawei-Edinburgh","image":"https://github.com/Gujiawei-Edinburgh.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://bifromq.apache.org/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache BifroMQ (Incubating) - Open source MQTT Broker RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache BifroMQ (Incubating) - Open source MQTT Broker Atom Feed"><link rel="stylesheet" href="/assets/css/styles.9f1b226c.css">
<script src="/assets/js/runtime~main.247e76bd.js" defer="defer"></script>
<script src="/assets/js/main.8a59a69e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/logo_dark.svg"><link rel="preload" as="image" href="https://github.com/Gujiawei-Edinburgh.png"><link rel="preload" as="image" href="/img/apache-incubator.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_cCsT" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="BifroMQ Logo" class="bifromq-navbar-logo-class themedComponent_kh6W themedComponent--light_h03h"><img src="/img/logo_dark.svg" alt="BifroMQ Logo" class="bifromq-navbar-logo-class themedComponent_kh6W themedComponent--dark_QNPN"></div><b class="navbar__title text--truncate">Apache BifroMQ (Incubating)</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/get_started/intro/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><a class="navbar__item navbar__link" href="/docs/get_started/download/intro/">Download</a><a class="navbar__item navbar__link" href="/docs/get_started/faq/">FAQ</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/get_started/intro/">Next (Incubating)</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/get_started/intro/">Next (Incubating)</a></li><li><a class="dropdown__link" href="/docs/3.3.x/get_started/intro/">3.3.x</a></li><li><a class="dropdown__link" href="/docs/3.2.x/get_started/intro/">3.2.x</a></li><li><a class="dropdown__link" href="/docs/3.1.x/get_started/intro/">3.1.x</a></li><li><a class="dropdown__link" href="/docs/3.0.x/get_started/intro/">3.0.x</a></li><li><a class="dropdown__link" href="/docs/2.1.x/Readme/">2.1.x</a></li><li><a class="dropdown__link" href="/docs/2.0.0/Readme/">2.0.0</a></li><li><a class="dropdown__link" href="/docs/1.0.x/Readme/">1.0.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><a href="https://github.com/apache/bifromq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_mVhP colorModeToggle_uW4C"><button class="clean-btn toggleButton_IMMl toggleButtonDisabled_LuC_" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 lightToggleIcon_AJW3"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 darkToggleIcon_JatO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_X8N1 systemToggleIcon__uuk"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_AGV4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_tdfK"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_dtOB thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_QI0f margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_JaZ8">2024</h3><ul class="sidebarItemList_sf3w clean-list"><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-version-3/">BifroMQ 3.0.0 Beta: Enhanced Messaging with MQTT 5.0</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_JaZ8">2023</h3><ul class="sidebarItemList_sf3w clean-list"><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-topic-subscription/">BifroMQ&#x27;s Topic Subscription Mechanism</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-high-availibility/">BifroMQ: Unveiling the Technology for Building Efficient and Available Clusters</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-standardcluster/">BifroMQ StandardCluster</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/bifromq-tech-architecture/">BifroMQ Technical Architecture Overview</a></li><li class="sidebarItem_MlaL"><a aria-current="page" class="sidebarItemLink_PdtZ sidebarItemLinkActive_J7Co" href="/blog/AnyAuth and Integration with BifroMQ/">AnyAuth and Integration with BifroMQ</a></li><li class="sidebarItem_MlaL"><a class="sidebarItemLink_PdtZ" href="/blog/news-bifromq-opensource/">BifroMQ officially open source : high-performance multi-tenant MQTT Broker</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_LGXf">AnyAuth and Integration with BifroMQ</h1><div class="container_o_qj margin-vert--md"><time datetime="2023-09-04T00:00:00.000Z">September 4, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_nbqI"><div class="avatar margin-bottom--sm"><a href="https://github.com/Gujiawei-Edinburgh" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_QuNx" src="https://github.com/Gujiawei-Edinburgh.png" alt="Gu Jiawei"></a><div class="avatar__intro authorDetails_zi_r"><div class="avatar__name"><a href="https://github.com/Gujiawei-Edinburgh" target="_blank" rel="noopener noreferrer"><span class="authorName_J_rd">Gu Jiawei</span></a></div><div class="authorSocials_ZMMT"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>The <strong>AnyAuth</strong> plugin is a powerful extension built upon the BifroMQ <code>IAuthProvider</code> interface using PF4J. It is
designed to provide seamless authentication and authorization capabilities for BifroMQ, enabling users to secure access
to messages and resources across a wide range of clients.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="bifromq-in-smart-home">BifroMQ in Smart Home<a href="#bifromq-in-smart-home" class="hash-link" aria-label="Direct link to BifroMQ in Smart Home" title="Direct link to BifroMQ in Smart Home">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h3>
<p>Company A is a firm specializing in the smart home industry. They aim to enhance their product&#x27;s value and user
experience by incorporating IoT (Internet of Things) technology, allowing remote control of their products. They have
chosen BifroMQ as their MQTT message middleware, integrated into their IoT platform to connect their smart home devices
to the internet.</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="key-participants">Key Participants<a href="#key-participants" class="hash-link" aria-label="Direct link to Key Participants" title="Direct link to Key Participants">​</a></h3>
<ul>
<li>Company A: Smart home devices manufacturer looking to enhance product value and user experience through IoT technology.</li>
<li>Company B: Software development company responsible for developing the IoT platform and WeChat Mini Program for
company A.</li>
<li>BifroMQ: MQTT message middleware providing reliable message transmission services, integrated into the IoT platform
by company B.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="end-users">End Users<a href="#end-users" class="hash-link" aria-label="Direct link to End Users" title="Direct link to End Users">​</a></h3>
<p>As users of the smart home devices, we anticipate the ability to remotely control the devices, e.g. air conditioner,
adjust the temperature, check the current indoor temperature, and monitor the air conditioner&#x27;s operational status
through the WeChat Mini Program.</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="anyauth-in-bifromq">AnyAuth in BifroMQ<a href="#anyauth-in-bifromq" class="hash-link" aria-label="Direct link to AnyAuth in BifroMQ" title="Direct link to AnyAuth in BifroMQ">​</a></h3>
<p>The versatility of the <strong>AnyAuth</strong> plugin lies in its support for various authentication mechanisms, including
traditional username/password that is for devices, auth0, and even WeChat integration. This means that users can be
authenticated by using their preferred social accounts, simplifying access to BifroMQ.</p>
<p>Furthermore, <strong>AnyAuth</strong> seamlessly integrates with BifroMQ, offering Role-Based Access Control (RBAC) through
Access Control Lists (ACL). This feature empowers administrators to define distinct roles and permissions, which can
then ensure fine-grained access control.</p>
<p>For more information and technical design, check the <a href="https://github.com/Gujiawei-Edinburgh/bifromq-plugin-anyAuth#readme" target="_blank" rel="noopener noreferrer">article</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="setup-steps">Setup Steps<a href="#setup-steps" class="hash-link" aria-label="Direct link to Setup Steps" title="Direct link to Setup Steps">​</a></h2>
<p>Integrating <strong>AnyAuth</strong> with BifroMQ has proven to be remarkably straightforward. Here&#x27;s a concise rundown to get
started:</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<p>Before we dive in, it&#x27;s essential to understand that AnyAuth&#x27;s primary focus lies in querying users&#x27; credentials and
corresponding ACL rules. Handling administrative tasks, such as user registration and ACL specification, falls under
the purview of other services. To ensure a smooth data retrieval process, users must complete device registration and
specify ACL requirements in advance.</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="configure-anyauth-plugin">Configure AnyAuth Plugin<a href="#configure-anyauth-plugin" class="hash-link" aria-label="Direct link to Configure AnyAuth Plugin" title="Direct link to Configure AnyAuth Plugin">​</a></h3>
<p><strong>AnyAuth</strong>&#x27;s flexibility hinges on the correct configuration of authentication parameters. These parameters can vary
depending on your chosen authentication method (e.g., username/password, auth0 and WeChat). The configuration file can
be found in the <code>bifromq-plugin-anyAuth/auth-plugin/src/main/resources</code> directory and will be packaged into the JAR file
after compilation. Therefore, it&#x27;s crucial to configure it first.</p>
<div class="language-yaml codeBlockContainer_cnqV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_YnMw"><pre tabindex="0" class="prism-code language-yaml codeBlock_C1s_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QVX0"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">tenantId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">TENANTID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">authUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AUTH_SERVICE_AUTH_URL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">checkUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AUTH_SERVICE_CHECK_URL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">auth0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AUTH0_DOMAIN</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">wechat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">appId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">APP_ID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">appSecret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">APP_SECRET</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">requestUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//api.weixin.qq.com/sns/jscode2session</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">appid=</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="setup-bifromq-with-plugin">Setup BifroMQ with Plugin<a href="#setup-bifromq-with-plugin" class="hash-link" aria-label="Direct link to Setup BifroMQ with Plugin" title="Direct link to Setup BifroMQ with Plugin">​</a></h3>
<p>Now, let&#x27;s move to the practical implementation. In your <strong>AnyAuth</strong> project directory, run the following command to
generate the necessary output:</p>
<div class="language-mvn codeBlockContainer_cnqV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_YnMw"><pre tabindex="0" class="prism-code language-mvn codeBlock_C1s_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QVX0"><span class="token-line" style="color:#393A34"><span class="token plain">cd bifromq-plugin-anyAuth &amp;&amp; mvn clean package</span><br></span></code></pre></div></div>
<p>This command will generate an <code>auth-plugin-${VERSION}.jar</code> and <code>auth-service-${VERSION}.tar.gz</code> file in their respective
target directories.</p>
<p>To ensure BifroMQ correctly loads the <strong>AnyAuth</strong> plugin, place the corresponding JAR file in the plugins directory
within BifroMQ&#x27;s target directory, i.e. <code>bifromq-${VERSION}/plugins</code>. Additionally, specify the Fully Qualified Name (FQN),
e.g. <code>authProviderFQN: bifromq.plugin.auth.AuthProvider</code>, in BifroMQ&#x27;s configuration file (<code>conf/standalone.yml</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_u6yr" id="setup-anyauth-service">Setup AnyAuth Service<a href="#setup-anyauth-service" class="hash-link" aria-label="Direct link to Setup AnyAuth Service" title="Direct link to Setup AnyAuth Service">​</a></h3>
<p>The plugin JAR file acts as a client for authentication and authorization, while the <strong>AnyAuth</strong> service handles database
query operations. Deploy the <strong>AnyAuth</strong> service, specifying MySQL connection parameters for credentials and permission
rules queries.</p>
<p>For development or testing purposes, <strong>AnyAuth</strong> also supports dummy storage, i.e. set <code>type: Dummy</code> in <strong>AnyAuth</strong>
service configuration file.</p>
<h2 class="anchor anchorWithStickyNavbar_u6yr" id="end-to-end-demo">End-to-End Demo<a href="#end-to-end-demo" class="hash-link" aria-label="Direct link to End-to-End Demo" title="Direct link to End-to-End Demo">​</a></h2>
<p>With all the setup steps completed, we can now embark on an exciting journey. Utilize a WeChat MiniProgram to log in to
BifroMQ, and a user-friendly GUI application to simulate devices. The video below showcases a typical scenario: a device
reporting the current temperature via BifroMQ, and a WeChat MiniProgram receiving the message, subsequently issuing
commands based on the data.</p>
<div class="video__wrapper"><div style="width:100%;height:100%" class="video__player"></div></div></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_kw4g padding--none margin-left--sm"><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/auth/">Auth</a></li><li class="tag_dR3I"><a rel="tag" class="tag_aqcr tagRegular_CD38" href="/blog/tags/plugin/">Plugin</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/bifromq-sites/tree/master/blog" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_s6_v" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_SVwk"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/bifromq-tech-architecture/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">BifroMQ Technical Architecture Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/news-bifromq-opensource/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">BifroMQ officially open source : high-performance multi-tenant MQTT Broker</div></a></nav></main><div class="col col--2"><div class="tableOfContents_D50z thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bifromq-in-smart-home" class="table-of-contents__link toc-highlight">BifroMQ in Smart Home</a><ul><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#key-participants" class="table-of-contents__link toc-highlight">Key Participants</a></li><li><a href="#end-users" class="table-of-contents__link toc-highlight">End Users</a></li><li><a href="#anyauth-in-bifromq" class="table-of-contents__link toc-highlight">AnyAuth in BifroMQ</a></li></ul></li><li><a href="#setup-steps" class="table-of-contents__link toc-highlight">Setup Steps</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#configure-anyauth-plugin" class="table-of-contents__link toc-highlight">Configure AnyAuth Plugin</a></li><li><a href="#setup-bifromq-with-plugin" class="table-of-contents__link toc-highlight">Setup BifroMQ with Plugin</a></li><li><a href="#setup-anyauth-service" class="table-of-contents__link toc-highlight">Setup AnyAuth Service</a></li></ul></li><li><a href="#end-to-end-demo" class="table-of-contents__link toc-highlight">End-to-End Demo</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" rel="noopener noreferrer" class="footerLogoLink_U0bA"><img src="/img/apache-incubator.svg" alt="Apache Incubator logo" class="footer__logo themedComponent_kh6W themedComponent--light_h03h" width="200"><img src="/img/apache-incubator.svg" alt="Apache Incubator logo" class="footer__logo themedComponent_kh6W themedComponent--dark_QNPN" width="200"></a></div><div class="footer__copyright"><div>
      <p>
        Apache BifroMQ is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </p>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. <br>
        Apache, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div></footer></div>
</body>
</html>