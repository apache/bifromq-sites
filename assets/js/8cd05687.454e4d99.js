"use strict";(self.webpackChunkBifroMQ=self.webpackChunkBifroMQ||[]).push([[9430],{51539:(e,s,r)=>{r.d(s,{A:()=>i});const i=r.p+"assets/images/shared-subscription-10ee217a2cc0236cd88a4fb23daf5f7d.png"},61984:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"user_guide/connect/shared_sub","title":"Shared Subscriptions","description":"MQTT Shared Subscriptions is a feature of the MQTT protocol that allows multiple subscribers to share the same topic and receive messages in a fair manner. Below is the basic pattern for shared subscriptions:","source":"@site/versioned_docs/version-1.0.x/05_user_guide/1_connect/3_shared_sub.md","sourceDirName":"05_user_guide/1_connect","slug":"/user_guide/connect/shared_sub","permalink":"/docs/1.0.x/user_guide/connect/shared_sub","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/bifromq-sites/tree/master/website/versioned_docs/version-1.0.x/05_user_guide/1_connect/3_shared_sub.md","tags":[],"version":"1.0.x","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Basic Message Pub/Sub","permalink":"/docs/1.0.x/user_guide/connect/pubsub"},"next":{"title":"Data Integration","permalink":"/docs/1.0.x/category/data-integration"}}');var t=r(23420),n=r(65404);const o={sidebar_position:3},a="Shared Subscriptions",c={},d=[];function h(e){const s={code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"shared-subscriptions",children:"Shared Subscriptions"})}),"\n",(0,t.jsx)(s.p,{children:"MQTT Shared Subscriptions is a feature of the MQTT protocol that allows multiple subscribers to share the same topic and receive messages in a fair manner. Below is the basic pattern for shared subscriptions:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"shared-subscription",src:r(51539).A+"",width:"1644",height:"1134"})}),"\n",(0,t.jsxs)(s.p,{children:["The subscription pattern for shared subscriptions must follow the format ",(0,t.jsx)(s.code,{children:"$share/{groupName}/topicFilter"}),", where ",(0,t.jsx)(s.code,{children:"{groupName}"})," represents the shared group. In the diagram above, it is ",(0,t.jsx)(s.code,{children:"group1"}),". When multiple subscribers subscribe to the same topicFilter with same group name, they will join the same shared group. When there is a message from the publisher, BifroMQ first locates the shared group and then distributes the message to one of the subscribers within the group in a fair manner (in BifroMQ's implementation, a subscriber is randomly chosen from the group). This approach has several benefits:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Load Balancing"}),": MQTT shared subscriptions allow multiple subscribers to share the same topic and receive messages fairly. When a message is published to a subscribed topic, the MQTT broker server will choose one subscriber to receive the message instead of sending the message to all subscribers. This achieves load balancing, ensuring that messages are evenly distributed among subscribers and preventing any single subscriber from being overwhelmed with too many messages."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Flexibility and Scalability"}),": By using shared subscriptions, subscribers can be easily added or removed without changing the logic of the publisher or other subscribers. This offers flexibility and scalability, enables the system to adapt to the dynamically changing number of subscribers."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Saving Network Bandwidth"}),": Shared subscriptions can reduce the use of network bandwidth. In conventional subscription models, each subscriber receives the same message copy, leading to a waste of network bandwidth. In shared subscriptions, the message is only sent to one subscriber, effectively reducing the volume of message transmissions over the network, and thus saving bandwidth resources."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},65404:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>a});var i=r(36672);const t={},n=i.createContext(t);function o(e){const s=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);