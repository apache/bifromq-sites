"use strict";(globalThis.webpackChunkbifromq=globalThis.webpackChunkbifromq||[]).push([[43505],{21977:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"user_guide/basic/shared_sub","title":"Shared Subscriptions","description":"MQTT Shared Subscriptions are a feature of the MQTT protocol that enables multiple subscribers to receive messages from the same topic in a fair manner.","source":"@site/docs/user_guide/basic/shared_sub.md","sourceDirName":"user_guide/basic","slug":"/user_guide/basic/shared_sub","permalink":"/docs/user_guide/basic/shared_sub","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/bifromq-sites/tree/master/docs/user_guide/basic/shared_sub.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Shared Subscriptions"},"sidebar":"tutorialSidebar","previous":{"title":"Pub/Sub","permalink":"/docs/user_guide/basic/pubsub"},"next":{"title":"Data Integration","permalink":"/docs/user_guide/integration/intro"}}');var t=s(47259),n=s(29087);const o={sidebar_position:3,title:"Shared Subscriptions"},a=void 0,c={},h=[{value:"Sharing Strategies",id:"sharing-strategies",level:3}];function u(e){const r={code:"code",h3:"h3",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"MQTT Shared Subscriptions are a feature of the MQTT protocol that enables multiple subscribers to receive messages from the same topic in a fair manner."}),"\n",(0,t.jsx)(r.mermaid,{value:"graph LR\n\n  Publisher(Publisher)\n  BifroMQ(BifroMQ)\n\n  Subscriber0(Subscriber 0)\n  Subscriber1(Subscriber 1)\n\n  subgraph Shared Group\n    SharedSubscriber0(Shared Subscriber 0)\n    SharedSubscriber1(Shared Subscriber 1)\n  end\n\n  Publisher --\x3e|Publish 20\xb0C<br>x/y/z| BifroMQ\n  BifroMQ --\x3e|Publish 20\xb0C| Subscriber0\n  BifroMQ --\x3e|Publish 20\xb0C| Subscriber1\n\n  BifroMQ --\x3e SharedSubscriber0\n  BifroMQ --\x3e SharedSubscriber1\n\n  Subscriber0 -.->|Subscribe<br>x/y/z| BifroMQ\n  Subscriber1 -.->|Subscribe<br>x/y/z| BifroMQ\n\n  SharedSubscriber0 -.->|Subscribe<br>$share/group1/x/y/z| BifroMQ\n  SharedSubscriber1 -.->|Subscribe<br>$share/group1/x/y/z| BifroMQ"}),"\n",(0,t.jsxs)(r.p,{children:["To initiate a shared subscription, you should subscribe to a topic using the ",(0,t.jsx)(r.code,{children:"$share/{groupName}/{topicFilter}"})," format. ",(0,t.jsx)(r.code,{children:"{groupName}"})," refers to the name of the group sharing the subscription, as demonstrated with ",(0,t.jsx)(r.code,{children:"group1"})," in the diagram.\nWhen subscribers choose to subscribe using the same topicFilter and groupName, they become part of the same shared group. Whenever a publisher sends a message, BifroMQ determines which subscriber in the group receives the message based on the defined sharing strategy."]}),"\n",(0,t.jsx)(r.h3,{id:"sharing-strategies",children:"Sharing Strategies"}),"\n",(0,t.jsx)(r.p,{children:"Sharing strategies define the method used to decide which subscriber within the shared group receives the message when it is sent. The MQTT protocol does not explicitly detail these strategies, but based on the use cases for shared subscriptions, BifroMQ implements two strategies:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsxs)(r.strong,{children:["Random Selection (",(0,t.jsx)(r.code,{children:"$share/{groupName}/topicFilter"}),")"]}),": Utilizing the ",(0,t.jsx)(r.code,{children:"$share"})," prefix for shared subscriptions, this strategy is ideal for applications where the order of message processing is not crucial."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsxs)(r.strong,{children:["Ordered Binding (",(0,t.jsx)(r.code,{children:"$oshare/{groupName}/topicFilter"}),")"]}),": By employing the ",(0,t.jsx)(r.code,{children:"$oshare"})," prefix for shared subscriptions, this strategy ensures messages from the same client connection and topic are forwarded in the order they were published to the same subscriber. This is suitable for scenarios where the sequence of messages is important."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Note"}),": The combination of a sharing strategy and group name creates a unique identifier, meaning that shared subscriptions with the same group name but different prefixes (",(0,t.jsx)(r.code,{children:"$share"})," and ",(0,t.jsx)(r.code,{children:"$oshare"}),") will establish separate shared groups, each with its own sharing strategy."]})]})}function d(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},29087:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>a});var i=s(96363);const t={},n=i.createContext(t);function o(e){const r=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(n.Provider,{value:r},e.children)}}}]);